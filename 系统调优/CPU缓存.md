# 一、缓存的结构

（一）、核心独有

1. 一级缓存

32KB

一级数据缓存

一级指令缓存

2. 二级缓存

256KB

3. 三级缓存

20MB

多个CPU核心共享

# 二、优化

## （一）、提升数据缓存命中率

CPU一次性载入64字节到缓存行，如果还能放下，会预加载临近的数据到缓存行（局部性原理）

利用内存局部顺序访问

## （二）、提升指令缓存命中率

分支预测器提前将预测要执行的指令放入指令缓存

## （三）、缓存伪共享

填充无用字节

## （四）、CPU亲和度

```text
sched_setaffinity
```

### 绑定进程到CPU上

`taskset -c <cpu核编号> <pid>`

### 绑定线程到CPU上

`Java-Thread-Affinity库`