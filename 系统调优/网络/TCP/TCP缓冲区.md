不要手动设置SO_SNDBUF和SO_RCVBUF属性，这样会使关闭自动调节窗口大小功能

TCP头部窗口大小字段为2个字节，也就是窗口最大为65535，其中0表示关闭窗口

可设置`tcp_window_scaling=1`开启扩充窗口（开启后TCP头部多了4个字节的选项及8字节的填充，共12个字节），可达到1GB的大小

带宽时延积 = 最大带宽 * 网络时延（ping）

`tcp_wmem`、`tcp_rmem`可以设置窗口动态调节参数，为`最小字节 初始字节 最大字节`，初始字节使用默认的4K，最大字节不要超过带宽时延积

其中，接收缓冲区自动调节还需要`tcp_moderate_rcvbuf=1`开启，并且接收缓冲区自动调节根据系统的空闲内存进行调节

`tcp_mem`中，`1 2 3`，内存小于1，则不开启自动调节；在1与2之间，开始自动调节；大于3，则不会为新TCP分配新内存，此时新连接无法建立。

提升`tcp_men`及内存紧张时降低窗口默认值可提升并发能力

