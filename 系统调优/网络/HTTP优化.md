##  一、HTTP1.1的缺点

头部使用ASCII编码，占用空间大

由于REST架构的无状态设计，每个请求都必须重传HTTP头部

## 二、HTTP1.1优化

### 使用缓存

使用URL及部分头部的信息作为key，保存数据到本地磁盘

可使用Cache-Control和Expires设置过期，其中前者的优先级更高

当缓存事项时，也可以头部携带ETag，服务端判断没有变更。返回304

### 减少请求次数

### 减少重定向次数

将重定向交由代理服务器执行

301、307的重定向可缓存

### 合并请求

比如将多个小图标放入一个大图里面返回，由客户端自己切分

业务上可以合并的请求

### 延迟发送

延迟加载资源

### 资源压缩

## 三、HTTP2

### 编码

#### huffman

#### 静态表

将61个高频的头部进行编码，并使用huffman编码值

#### 动态表

客户端与服务端按照同样的规则，对首次出现的头部进行标识，后续只需要传递这些标识即可

`http2_max_request`限制一个连接上的请求次数，防止动态表太大

### 并发请求

一个HTTP消息由多个Frame组成， Message包含HTTP头部及包体组成，由Frame帧承载

Frame受限`http2_chunk_size`，默认8K

故一个Frame可由多个TCP报文组成（MSS=MTU-IP首部-TCP首部=1460 ）




