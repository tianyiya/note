## 算法

LRU

## 架构

负载均衡：

分发线程根据主机IP哈希到墨特定的工作线程

多线程同步：

工作线程配发工作缓冲队列

使用轻量级自旋锁操作队列，避免用户态与内核态的切换

CPU亲和度：

可绑定CPU

内存分配器：

使用tcmalloc

## 心跳包协议

如果小于MTU，即1500字节，使用UDP，否则使用TCP

因为MTU的限制，过大的包需要拆包，而IP协议不擅长拆包解包，TCP自己实现了拆包解包

UDP的头部更小


## TCP优化

