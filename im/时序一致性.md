# 一、以服务端或以客户端为准的业务场景

邮件发送以客户端时间为准

秒杀以服务端时序为准

# 二、服务端生成单调递增的ID

# 三、业务能接受非常短时间的误差

# 四、发送顺序与接收顺序的一致

1. 消息打包
2. 排队单TCP依次发送
3. 消息携带发送方本地时序

# 五、保证多接收方顺序的一致

单点序列化，将相关请求路由到一个节点执行

Q&A

> 保证同一个会话（单聊、群聊）的消息由同一个logic消费

根据会话ID分区到MQ，业务消费MQ获取会话sequence

